# -*- coding: utf-8 -*-
"""cofe

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1Yy1rmNdEifw1T5Q-JFPzkEXJFMGfBOcJ
"""

import random
import pandas as pd
import matplotlib.pyplot as plt

# ===== CONFIGURACIÃ“N INICIAL =====
capital_inicial = float(input("ğŸ’° Ingresa tu capital inicial: "))
capital = capital_inicial
acciones = 0
precio_cafe = 10000
dia = 1

historial_precios = []
movimientos = []

noticias = [
    "ğŸŒ§ï¸ Lluvias afectan la cosecha",
    "â˜€ï¸ Buen clima impulsa la producciÃ³n",
    "ğŸ“¦ Aumento de exportaciones",
    "ğŸ“‰ CaÃ­da de la demanda internacional",
    "ğŸ“ˆ Alta demanda en Europa",
    "ğŸš¢ Problemas logÃ­sticos en puertos"
]

print("\nâ˜• Simulador de InversiÃ³n en CafÃ© â˜•")

while True:
    print(f"\nğŸ“… DÃ­a {dia}")
    print(f"Precio del cafÃ©: ${precio_cafe:.2f}")
    print(f"Capital disponible: ${capital:.2f}")
    print(f"Acciones en posesiÃ³n: {acciones}")

    print("\nOpciones:")
    print("1. Comprar acciones")
    print("2. Vender acciones")
    print("3. Avanzar dÃ­a")
    print("4. Finalizar simulaciÃ³n")

    opcion = input("Selecciona una opciÃ³n: ")

    if opcion == "1":
        cantidad = int(input("Cantidad de acciones a comprar: "))
        costo = cantidad * precio_cafe
        if costo <= capital:
            capital -= costo
            acciones += cantidad
            movimientos.append([dia, "Compra", cantidad, precio_cafe, capital])
            print("âœ… Compra exitosa")
        else:
            print("âŒ Capital insuficiente")

    elif opcion == "2":
        cantidad = int(input("Cantidad de acciones a vender: "))
        if cantidad <= acciones:
            capital += cantidad * precio_cafe
            acciones -= cantidad
            movimientos.append([dia, "Venta", cantidad, precio_cafe, capital])
            print("âœ… Venta exitosa")
        else:
            print("âŒ No tienes suficientes acciones")

    elif opcion == "3":
        noticia = random.choice(noticias)
        cambio = random.uniform(-0.06, 0.06)
        precio_cafe += precio_cafe * cambio

        historial_precios.append(precio_cafe)
        movimientos.append([dia, "Mercado", "-", precio_cafe, capital])

        print("\nğŸ“° Noticia del dÃ­a:", noticia)
        dia += 1

    elif opcion == "4":
        valor_final = capital + acciones * precio_cafe

        print("\nğŸ“Š RESULTADOS FINALES")
        print(f"Capital inicial: ${capital_inicial:.2f}")
        print(f"Capital final: ${valor_final:.2f}")
        print(f"Ganancia/PÃ©rdida: ${valor_final - capital_inicial:.2f}")

        # ===== TABLA =====
        df = pd.DataFrame(
            movimientos,
            columns=["DÃ­a", "AcciÃ³n", "Cantidad", "Precio", "Capital restante"]
        )
        display(df)

        # ===== GRÃFICA =====
        plt.figure(figsize=(8,4))
        plt.plot(historial_precios, marker='o')
        plt.title("EvoluciÃ³n del precio del cafÃ©")
        plt.xlabel("DÃ­as")
        plt.ylabel("Precio")
        plt.grid(True)
        plt.show()

        print("â˜• Fin del simulador")
        break

    else:
        print("âŒ OpciÃ³n invÃ¡lida")